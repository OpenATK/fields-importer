(this["webpackJsonpfields-importer"]=this["webpackJsonpfields-importer"]||[]).push([[0],{107:function(e,t){},257:function(e){e.exports=JSON.parse('{"name":"fields-importer","homepage":"https://openatk.com/fields-importer","version":"1.0.3","private":true,"dependencies":{"@mapbox/togeojson":"^0.16.0","@oada/oada-cache":"^3.1.8","@oada/oada-certs":"^3.1.6","@oada/oada-id-client":"^1.0.8","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.3.2","@testing-library/user-event":"^7.1.2","bluebird":"^3.7.2","debug":"^4.1.1","fast-safe-stringify":"^2.0.7","ksuid":"^2.0.0","lodash":"^4.17.15","react":"^16.13.1","react-dom":"^16.13.1","react-dropzone":"^10.2.2","react-helmet":"^6.0.0","react-scripts":"3.4.1","superagent":"^5.2.2","url":"^0.11.0","uuid":"^7.0.3"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm run build","deploy":"gh-pages -d build"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"gh-pages":"^3.0.0"}}')},263:function(e,t,r){e.exports=r(539)},268:function(e,t,r){},276:function(e,t,r){},280:function(e,t){},282:function(e,t){},311:function(e,t){},312:function(e,t){},409:function(e,t){},411:function(e,t){},456:function(e,t){},536:function(e,t){},537:function(e,t){e.exports="eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6InluMjJ1akJVQ0VlbE5VUnJhOW9na2hlRDJLRVhvbGprc21BVnFGcTBMUGciLCJqd2siOnsia3R5IjoiUlNBIiwia2lkIjoieW4yMnVqQlVDRWVsTlVScmE5b2draGVEMktFWG9samtzbUFWcUZxMExQZyIsIm4iOiJycjM4aUs4RmkwXy1DUkxUdlZLNElJQ2xhcmlpNndWSHBFN3paUFhvRVJsX09vaDY0WW1iUWNSYTVlRncwVVFoVXZFQ2hLdTlObzNqbTdMVzlaY0wxSEtyaGtVVy1PUW9iT1hVbnJDZ29DcGE4VlloX3dSSWRRWWJzdlBRVmo1Tkd1dU5YYVpCX19weEZ5LW5fTzJJTVM4T0dyZXptM2JRSERBZi1qbmdJaFpHWmdMYXZMSnlTSFV5RFFMNEZiUTZEM1F6M0FNT3J4RnZhNEtCSVBDUUtGT21ZWFZuNHp0Z1Q2OGhneU1vYzFLeXR4b1JnelZIbkNkVHBQV1dWcm5NRmNKZWRZRC1MbWswWG81cmpZT3htcThBMWVqZnhQTWVSXzNWNzhBSmsyTERJNHZHYUozZm5hUFpTN0N2VzhGM3BXV2lqX0J5VkdDSS01QnJrcUhfblEiLCJlIjoiQVFBQiJ9fQ.eyJyZWRpcmVjdF91cmlzIjpbImh0dHBzOi8vb3BlbmF0ay5jb20vZmllbGRzLWltcG9ydGVyL29hdXRoMi9yZWRpcmVjdC5odG1sIiwiaHR0cHM6Ly9vcGVuYXRrLmdpdGh1Yi5pby9maWVsZHMtaW1wb3J0ZXIvb2F1dGgyL3JlZGlyZWN0Lmh0bWwiLCJodHRwczovL2xvY2FsaG9zdDozMDAwL2ZpZWxkcy1pbXBvcnRlci9vYXV0aDIvcmVkaXJlY3QuaHRtbCIsImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9maWVsZHMtaW1wb3J0ZXIvb2F1dGgyL3JlZGlyZWN0Lmh0bWwiLCJodHRwczovL2xvY2FsaG9zdDo4MDAwL2ZpZWxkcy1pbXBvcnRlci9vYXV0aDIvcmVkaXJlY3QuaHRtbCIsImh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9maWVsZHMtaW1wb3J0ZXIvb2F1dGgyL3JlZGlyZWN0Lmh0bWwiXSwidG9rZW5fZW5kcG9pbnRfYXV0aF9tZXRob2QiOiJ1cm46aWV0ZjpwYXJhbXM6b2F1dGg6Y2xpZW50LWFzc2VydGlvbi10eXBlOmp3dC1iZWFyZXIiLCJncmFudF90eXBlcyI6WyJhdXRob3JpemF0aW9uX2NvZGUiXSwicmVzcG9uc2VfdHlwZXMiOlsidG9rZW4iLCJjb2RlIiwiaWRfdG9rZW4iLCJpZF90b2tlbiB0b2tlbiIsImNvZGUgaWRfdG9rZW4iLCJjb2RlIHRva2VuIiwiY29kZSBpZF90b2tlbiB0b2tlbiJdLCJjbGllbnRfbmFtZSI6Ik9wZW5BVEsgRmllbGRzIEltcG9ydGVyIiwiY2xpZW50X3VyaSI6Imh0dHBzOi8vb3BlbmF0ay5jb20vZmllbGRzLWltcG9ydGVyIiwiY29udGFjdHMiOlsiQWFyb24gQXVsdCA8YXVsdGFjQHB1cmR1ZS5lZHU-Il0sImp3a3MiOnsia2V5cyI6W3sia3R5IjoiUlNBIiwia2lkIjoiZjdmODBkMGRkZTk5NGRjMGFlNzBlYWU1M2E1MzMxYjIiLCJlIjoiQVFBQiIsIm4iOiJ4eTV5YWRKZnpiS1FuYVJGcnJBbmVwWU56Z0VRemtXTE4yRUtSQThFSkplN2F5elFVMWxzOXgwckIxa0YxYWlkUGVSY3E3YVVMLVNIYjNFdlFyRHhaR1BDWElYYzVXWlBEUTRabmduR2JHdU90bHFHV2tIVFZIc1pRYTZjSkZ2U21qN3hCWHVCd1hNMFJ0SFNaSWN5V0ptY0xPWW15Umt4ay1QSFpCYXlMTzgzZ1RnMlBxZmMxVEdpRmN5bUotQk4wTWpjT2NlQ0MyRzB2aEhfWHI0dlktOTQzeHI2eS1meTdvMFQ2S1Y2dm1IaW45Y1R4clRja2U3Y2cwZ2tzNmZtYzhiLWdkdFFpWjBYOHEyMmN3YXJXZFVLV1pOekxSRmpNMzhXb0x3NFFhVlhZaFBJbTc2N3NyVlhGQ1F0MlQ5bnNuTy1UMXYzUUNqTzc4S2pPVFFjSHcifV19fQ.p6Df0h9q1WkY7ukWReYvV9YZ5p14jhijwVXlzs3hfiRP_KjkNF44CBnzJqwSD5yRATZrBLGCnnAtylL-OTDmTNua_f1S1VP0TrhWmoK2iLmJsGcJl7Bz8xtBCOarZOk1DsAllUi4iS-AJjj4wOrmGQRO5vrK3jukWFyTB4uKciIyJsdJIGtGxGKV-bpVm_6wdwaDXz-wB67srxqn3-wUEPx5yMTtKctcsMBhwXP6Q1v6_QfjTwnzoTz7PY7TNpkYmYwIPj15bVC9bQmpgbTD3s-VB6InpOuP3YZ5JUSPwlD66V2u7ZQvRXfJttKTUhSOhrh_TSpkQuLIZ-U_e4iydA"},538:function(e,t){e.exports={redirect_uris:["https://openatk.com/fields-importer/oauth2/redirect.html","https://openatk.github.io/fields-importer/oauth2/redirect.html"],token_endpoint_auth_method:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer",grant_types:["authorization_code"],response_types:["token","code","id_token","id_token token","code id_token","code token","code id_token token"],client_name:"OpenATK Fields Importer",client_uri:"https://openatk.com/fields-importer",contacts:["Aaron Ault <aultac@purdue.edu>"],jwks:{keys:[{kty:"RSA",kid:"f7f80d0dde994dc0ae70eae53a5331b2",e:"AQAB",n:"xy5yadJfzbKQnaRFrrAnepYNzgEQzkWLN2EKRA8EJJe7ayzQU1ls9x0rB1kF1aidPeRcq7aUL-SHb3EvQrDxZGPCXIXc5WZPDQ4ZngnGbGuOtlqGWkHTVHsZQa6cJFvSmj7xBXuBwXM0RtHSZIcyWJmcLOYmyRkxk-PHZBayLO83gTg2Pqfc1TGiFcymJ-BN0MjcOceCC2G0vhH_Xr4vY-943xr6y-fy7o0T6KV6vmHin9cTxrTcke7cg0gks6fmc8b-gdtQiZ0X8q22cwarWdUKWZNzLRFjM38WoLw4QaVXYhPIm767srVXFCQt2T9nsnO-T1v3QCjO78KjOTQcHw"}]}}},539:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(251),i=r.n(o),s=(r(268),r(6)),c=r.n(s),l=r(15),d=r(252),u=r(253),p=r(262),m=r(260),f=r(254),h=r(257),g=r(16),y=r.n(g),v=(r(276),r(14)),b=r.n(v),w=r(80),k=r.n(w),x=r(5),F=r.n(x),j=r(61),V=r.n(j),W=r(261),Z=r(259),E=r.n(Z),R={bookmarks:{_type:"application/vnd.oada.bookmarks.1+json",_rev:0,fields:{_type:"application/vnd.oada.fields.1+json",_rev:0,fields:{"*":{_type:"application/vnd.oada.field.1+json",_rev:0}},farms:{"*":{_type:"application/vnd.oada.farm.1+json",_rev:0,grower:{_type:"application/vnd.oada.fields.1+json"}}},growers:{"*":{_type:"application/vnd.oada.fields.1+json",_rev:0}}}}},S=y()("fields-importer#config:trace"),J=(y()("fields-importer#config:info"),y()("fields-importer#config:error"));function I(){return(I=Object(l.a)(c.a.mark((function e(){var t,n,a,o,i,s,d,u,p,m;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=function(){return(u=Object(l.a)(c.a.mark((function e(r){var l,d,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=12;break}return S("No cert passed, must be in development mode.  Replacing dev-cert with one for this URL on the fly. loc = ",s),l=s.href.replace(/\/$/,""),i.redirect_uris=[l+"/oauth2/redirect.html"],S("New redirect_uris = ",i.redirect_uris),e.next=7,t.keys.create();case 7:return d=e.sent,e.next=10,t.sign(i,d.private);case 10:return o=e.sent,e.abrupt("return",i.redirect_uris[0]);case 12:if(!((u=a.findIndex(i.redirect_uris,(function(e){var t=n.parse(e);return t.protocol+"//"+t.host===s.protocol+"//"+s.host})))<0)){e.next=16;break}return J("ERROR: could not find redirect_uri in developer certificate for this domain!"),e.abrupt("return",!1);case 16:return e.abrupt("return",i.redirect_uris[u]);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)},d=function(e){return u.apply(this,arguments)},t=r(205),n=r(30),a=r(5),o=r(537),i=r(538),s=n.parse(window.location.href),p=!1,m=!1,e.next=18;break;case 14:m=e.sent,p=o,e.next=22;break;case 18:return e.next=20,d(o);case 20:m=e.sent,p=o;case 22:return e.abrupt("return",{redirect:m,metadata:p,scope:"oada.fields:all"});case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=function(){return I.apply(this,arguments)}(),G=y()("fields-importer#app:trace"),N=y()("fields-importer#app:trace"),C=y()("fields-importer#app:trace");localStorage.debug="*info*,*warn*,*error*";var z=!1;var M=function(e){Object(p.a)(r,e);var t=Object(m.a)(r);function r(e){var n;Object(d.a)(this,r),n=t.call(this,e);var a=localStorage["oada.domain"]||!1;return("false"===a||"string"===typeof a&&a.length<1)&&(a=!1),a&&!a.match(/^http/)&&(a="https://"+a),n.state={showlogin:!0,showdropzone:!1,showapproval:!1,showcomplete:!1,message:!1,jobs:[],domain:a,token:!1},n}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,!this.state.domain){e.next=6;break}return e.next=4,V.a.getDomainToken(this.state.domain);case 4:("false"===(t=e.sent)||"string"===typeof t&&t.length<1)&&(t=!1);case 6:G("componentDidMount: Setting state, token = ",JSON.stringify(t)),this.setState({showlogin:!t,showdropzone:!!t,token:t});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchAllRemoteGFF",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t,r,n,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({message:"Fetching your current fields..."}),e.next=3,z.get({path:"/bookmarks/fields"}).then((function(e){return e.data})).catch((function(e){return C("/bookmarks/fields does not exist!"),!1}));case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{growers:[],farms:[],fields:[]});case 6:return e.next=8,b.a.props({growers:b.a.reduce(F.a.keys(t.growers),function(){var e=Object(l.a)(c.a.mark((function e(t,r){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.get({path:"/bookmarks/fields/growers/".concat(r)}).then((function(e){return e.data})).catch((function(e){return C("Grower ".concat(r," doesn't exist!")),!1}));case 2:return(n=e.sent)&&(t[r]=n),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),{},{concurrency:5}),farms:b.a.reduce(F.a.keys(t.farms),function(){var e=Object(l.a)(c.a.mark((function e(t,r){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.get({path:"/bookmarks/fields/farms/".concat(r)}).then((function(e){return e.data})).catch((function(e){return C("Farm ".concat(r," doesn't exist!")),!1}));case 2:return(n=e.sent)&&(t[r]=n),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),{},{concurrency:5}),fields:b.a.reduce(F.a.keys(t.fields),function(){var e=Object(l.a)(c.a.mark((function e(t,r){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.get({path:"/bookmarks/fields/fields/".concat(r)}).then((function(e){return e.data})).catch((function(e){return C("Field ".concat(r," doesn't exist!")),!1}));case 2:return(n=e.sent)&&(t[r]=n),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),{},{concurrency:5})});case 8:return r=e.sent,n=r.growers,a=r.farms,o=r.fields,e.abrupt("return",{growers:n,farms:a,fields:o});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"geoJSONToOADA",value:function(e){var t=e.geojson,r=e.remote,n=F.a.reduce(t.features,(function(e,t){var n={name:t.properties["Grower - Name"]},a={name:t.properties["Farm - Name"]},o={name:t.properties["Field - Name"],boundary:t.geometry},i=F.a.find(F.a.keys(e.growers),(function(t){return e.growers[t].name===n.name}));i&&(n.id=i);var s=F.a.find(F.a.keys(e.farms),(function(t){return e.farms[t].name===a.name}));s&&(a.id=s);var c=F.a.find(F.a.keys(r.growers),(function(e){return r.growers[e].name===n.name}));c&&(n.id=c,n._id=r.growers[c]._id);var l=F.a.find(F.a.keys(r.farms),(function(e){return r.farms[e].name===a.name}));return l&&(a.id=l,a._id=r.farms[l]._id),(l=F.a.find(F.a.keys(r.fields),(function(e){return r.fields[e].name===o.name})))&&(o.id=l,o._id=r.fields[l]._id),n.id||(n.id=k.a.randomSync().string),a.id||(a.id=k.a.randomSync().string),o.id||(o.id=k.a.randomSync().string),a.grower={_id:n._id||"resources/".concat(n.id)},o.farm=a.id,e.growers[n.id]=n,e.farms[a.id]=a,e.fields[o.id]=o,e}),{growers:{},farms:{},fields:{}});return{growers:n.growers,farms:n.farms,fields:n.fields}}},{key:"constructJobList",value:function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F.a.reduce(["growers","farms","fields"],(function(e,r){return F.a.each(t[r],(function(t){t._id||e.push({type:r.replace(/s$/,""),listtype:r,data:t})})),e}),[]));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"putAllJobsToOADA",value:function(){var e=Object(l.a)(c.a.mark((function e(t){var r,n,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N("Have "+t.length+" jobs to do, creating all the resources"),this.setState({message:"Creating "+t.length+" resources in OADA"}),r={},n=[],e.next=6,b.a.each(["growers","farms","fields"],function(){var e=Object(l.a)(c.a.mark((function e(o){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=F.a.filter(t,(function(e){return e.listtype===o})),e.next=3,b.a.each(i,function(){var e=Object(l.a)(c.a.mark((function e(o){var i,s,l,d,u,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=F.a.cloneDeep(o.data),"field"===o.type&&i.farm&&(console.log(i.farm),s=r[i.farm],console.log(s),i.farm={_id:s.replace("/resources","resources")},console.log("creating this link",i.farm)),l="/bookmarks/fields/".concat(o.type,"s/").concat(i.id),d=i.id,i.id&&delete i.id,i.type&&delete i.type,G("Creating resource, job = ",o),G("Putting to path = ",l),e.prev=8,e.next=11,z.put({path:l,data:i,tree:R});case 11:u=e.sent,"farm"===o.type&&(r[d]=u.headers["content-location"],console.log("found a farm",d,r[d])),e.next=21;break;case 15:e.prev=15,e.t0=e.catch(8),(p=a.state.errors||[]).push({job:o}),a.setState({errors:p}),C("errored on job ",o,"error was: ",e.t0);case 21:n.push({resource:l,action:"create",type:o.type,data:i}),a.setState({message:"".concat(n.length," jobs handled so far, ").concat(t.length-n.length," left to go.")});case 23:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(t){return e.apply(this,arguments)}}(),{concurrency:1});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:return this.setState({showcomplete:!0}),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"droppedFiles",value:function(){var e=Object(l.a)(c.a.mark((function e(t){var r=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({message:"Connecting to OADA..."}),this.setState({showdropzone:!1}),G("Reusing token",this.state.token),e.next=5,V.a.connect({token:this.state.token,domain:this.state.domain,cache:!1});case 5:z=e.sent,t.forEach(function(){var e=Object(l.a)(c.a.mark((function e(t){var n,a,o,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.props({geojson:new b.a((function(e,r){N("Reading local KML file and converting to goejson");var n=new FileReader;n.onabort=function(){C("file reading was aborted"),r()},n.onerror=function(){C("file reading has failed"),r()},n.onload=Object(l.a)(c.a.mark((function t(){var r,a,o,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.result,a=new DOMParser,o=a.parseFromString(r,"text/xml"),i=E.a.kml(o),G("kml = ",o,", geojson = ",i),N("Extracting growers, farms, fields locally..."),e(i);case 7:case"end":return t.stop()}}),t)}))),n.readAsText(t)})),remote:r.fetchAllRemoteGFF()});case 2:return n=e.sent,a=n.geojson,o=n.remote,r.setState({message:"Comparing KML with what you have to decide if anything is new"}),N("Harmonizing local GFF with remote GFF, remote = ",o),i=r.geoJSONToOADA({geojson:a,remote:o}),G("Preparing to update remote, Final local gff = ",i),e.next=11,r.constructJobList(i);case 11:s=e.sent,r.setState({jobs:s,showapproval:!0,message:!1}),N("Done!");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"doLogin",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t,r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"string"!==typeof(t=this.state.domain)||t.match(/^http/)||(t="https://"+t),localStorage["oada.domain"]=t,e.next=5,O;case 5:return r=e.sent,G("redirect = ",O.redirect),e.prev=7,e.next=10,V.a.connect({domain:this.state.domain,cache:!1,options:{redirect:r.redirect,metadata:r.metadata,scope:r.scope}});case 10:z=e.sent,n=z.token,this.setState({token:n,showlogin:!1,showdropzone:!0}),G("Have connection and token: ",n),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(7),C("Connect failed!  error was: ",e.t0),this.setState({message:"Connection failed, please try again later."});case 20:case"end":return e.stop()}}),e,this,[[7,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"doLogout",value:function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N("Calling resetDomainCache..."),e.next=3,V.a.resetDomainCache(this.state.domain);case 3:this.setState({showlogin:!0,showdropzone:!1,showcomplete:!1,showapproval:!1,token:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"domainChanged",value:function(e){var t=e.target.value;this.setState({domain:t})}},{key:"render",value:function(){var e=this,t=this.state.jobs||[],r={growers:F.a.filter(t,(function(e){return"grower"===e.type})),farms:F.a.filter(t,(function(e){return"farm"===e.type})),fields:F.a.filter(t,(function(e){return"field"===e.type}))};return a.a.createElement("div",{className:"App",style:{fontFamily:"arial"}},a.a.createElement(f.a,null,a.a.createElement("title",null,"OpenATK Fields Importer - v",h.version)),a.a.createElement("div",{style:{backgroundColor:"#0066CC",color:"#FFFFFF",fontSize:"2em",padding:"5px",textAlign:"left",display:"flex",flexDirection:"row",alignItems:"center"}},a.a.createElement("div",null,"OpenAgToolkit Fields Importer"),a.a.createElement("div",{style:{flexGrow:1}}),this.state.showlogin?"":a.a.createElement("div",{onClick:function(){return e.doLogout()},style:{fontSize:"0.7em",color:"#FFFFFF",textDecoration:"underline"}},this.state.token?"Logout":"Login")),this.state.message?a.a.createElement("div",{style:{color:"#00AA00",padding:"5px",margin:"5px"}},this.state.message):null,this.state.showlogin?a.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},a.a.createElement("div",{style:{fontSize:"2em",padding:"20px"}},"Where should I sync fields to?"),a.a.createElement("div",{style:{}},a.a.createElement("input",{style:{fontSize:"1.0em",width:"250px"},type:"text",value:this.state.domain||"",onChange:function(t){return e.domainChanged(t)}})),a.a.createElement("div",{style:{margin:"10px",borderRadius:"3px",border:"1px solid #CCCCCC",width:"250px",backgroundColor:"#3399FF",color:"#FFFFFF",fontSize:"2em",cursor:"pointer"},onClick:function(){return e.doLogin()}},"Connect")):"",this.state.showdropzone?a.a.createElement("div",null,a.a.createElement("p",null,"Drop a KML from Ag Leader SMS here and it will ensure those growers, farms, and fields exist at your OADA cloud."),a.a.createElement(W.a,{onDrop:function(t){return e.droppedFiles(t)}},(function(e){var t=e.getRootProps,r=e.getInputProps;return a.a.createElement("section",null,a.a.createElement("div",Object.assign({style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center",border:"3px dashed #BBBBBB",borderRadius:"10px",margin:"5px",padding:"5px",minHeight:"50vh"}},t()),a.a.createElement("input",r()),a.a.createElement("p",{key:"thep"},"Drop KML files with your fields here.")))}))):"",this.state.showapproval?a.a.createElement("div",null,r.growers.length<1&&r.farms.length<1&&r.fields.length<1?a.a.createElement("div",{style:{color:"#00BB00",padding:"5px",margin:"5px"}},"Your remote OADA cloud is up to date with the names in this KML file, nothing new to send!"):a.a.createElement("div",{style:{padding:"10px"}},a.a.createElement("div",{style:{fontSize:"2em"}},"About to add the following items to your remote OADA cloud"),a.a.createElement("div",{onClick:function(){e.setState({showapproval:!1}),e.putAllJobsToOADA(e.state.jobs)},style:{backgroundColor:"#3399FF",borderRadius:"3px",color:"#FFFFFF",fontSize:"1.5em",margin:"15px"}},"Click to Approve")),F.a.map(["growers","farms","fields"],(function(e){return r[e].length<1?null:a.a.createElement("div",{key:e+"-list"},a.a.createElement("div",{style:{textAlign:"left",padding:"5px",fontWeight:"bold",fontSize:"1.5em"}},(t=e).charAt(0).toUpperCase()+t.slice(1)," (",r[e].length," new):"),a.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",flexDirection:"row"}},F.a.map(r[e],(function(t,r){return a.a.createElement("div",{key:"approval"+e+r,style:{padding:"5px",margin:"5px",borderRadius:"2px",border:"1px solid #EEEEEE"}},t.data.name)}))));var t}))):null,!this.state.errors||this.state.errors.length<1?null:a.a.createElement("div",{style:{color:"red",display:"flex",flexDirection:"column"}},"There are some errors in processing, please drop your KML again to fix.",F.a.map(this.state.errors,(function(e,t){return a.a.createElement("div",{key:"error"+t},e.job.type,": ",e.job.data.name)}))),this.state.showcomplete?a.a.createElement("div",{style:{color:"green"}},"Complete!"):null,a.a.createElement("div",{className:"footer-bar",style:{display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center",flexWrap:"wrap",position:"absolute",bottom:"0px",width:"99vw"}},a.a.createElement("div",{className:"footer-bar-element"},a.a.createElement("b",null,"License:"),a.a.createElement("br",null),"Apache 2.0"),a.a.createElement("div",{className:"footer-bar-element"},a.a.createElement("a",{href:"http://trellisframework.org"},a.a.createElement("img",{className:"footer-logo",alt:"trellis",width:"200px",src:"/fields-importer/logo-trellis.png"}))),a.a.createElement("div",{className:"footer-bar-element"},a.a.createElement("a",{href:"http://oatscenter.org"},a.a.createElement("img",{className:"footer-logo",alt:"oats",width:"200px",src:"/fields-importer/logo-oats.png"}))),a.a.createElement("div",{className:"footer-bar-element"},a.a.createElement("a",{href:"http://oatscenter.org"},a.a.createElement("img",{className:"footer-logo",alt:"purdue",width:"200px",src:"/fields-importer/logo-purdue.png"}))),a.a.createElement("div",{className:"footer-bar-element"},"Many thanks to key sponsor ",a.a.createElement("br",null),a.a.createElement("a",{href:"https://winfieldunited.com"},"Winfield United"),"!")))}}]),r}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[263,1,2]]]);
//# sourceMappingURL=main.d5c5a84e.chunk.js.map